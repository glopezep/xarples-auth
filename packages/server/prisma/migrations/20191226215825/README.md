# Migration `20191226215825`

This migration has been generated by Guillermo at 12/26/2019, 9:58:25 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "quaint"."AccessToken" (
  "client" TEXT NOT NULL   REFERENCES "Client"(id) ON DELETE RESTRICT,
  "id" TEXT NOT NULL   ,
  "scope" TEXT NOT NULL DEFAULT ''  ,
  "token" TEXT NOT NULL DEFAULT ''  ,
  "user" TEXT NOT NULL   REFERENCES "User"(id) ON DELETE RESTRICT,
  PRIMARY KEY ("id")
);

CREATE TABLE "quaint"."RefreshToken" (
  "client" TEXT NOT NULL   REFERENCES "Client"(id) ON DELETE RESTRICT,
  "id" TEXT NOT NULL   ,
  "scope" TEXT NOT NULL DEFAULT ''  ,
  "token" TEXT NOT NULL DEFAULT ''  ,
  "user" TEXT NOT NULL   REFERENCES "User"(id) ON DELETE RESTRICT,
  PRIMARY KEY ("id")
);

CREATE TABLE "quaint"."Client" (
  "client_id" TEXT NOT NULL DEFAULT ''  ,
  "client_secret" TEXT NOT NULL DEFAULT ''  ,
  "description" TEXT NOT NULL DEFAULT ''  ,
  "homepage_url" TEXT    ,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  "redirect_uri" TEXT NOT NULL DEFAULT ''  ,
  "user" TEXT NOT NULL   REFERENCES "User"(id) ON DELETE RESTRICT,
  PRIMARY KEY ("id")
);

CREATE TABLE "quaint"."AuthorizationCode" (
  "client" TEXT NOT NULL   REFERENCES "Client"(id) ON DELETE RESTRICT,
  "code" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "scope" TEXT NOT NULL DEFAULT ''  ,
  "user" TEXT NOT NULL   REFERENCES "User"(id) ON DELETE RESTRICT,
  PRIMARY KEY ("id")
);

CREATE TABLE "quaint"."Scope" (
  "description" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

CREATE TABLE "quaint"."User" (
  "email" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  "password" TEXT NOT NULL DEFAULT ''  ,
  "username" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

CREATE UNIQUE INDEX "quaint"."AccessToken.token" ON "AccessToken"("token")

CREATE UNIQUE INDEX "quaint"."RefreshToken.token" ON "RefreshToken"("token")

CREATE UNIQUE INDEX "quaint"."Client.client_id" ON "Client"("client_id")

CREATE UNIQUE INDEX "quaint"."Client.client_secret" ON "Client"("client_secret")

CREATE UNIQUE INDEX "quaint"."AuthorizationCode.code" ON "AuthorizationCode"("code")

CREATE UNIQUE INDEX "quaint"."User.email" ON "User"("email")

CREATE UNIQUE INDEX "quaint"."User.username" ON "User"("username")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20191226215825
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,57 @@
+generator photon {
+  provider = "photonjs"
+}
+
+datasource db {
+  provider = "sqlite"
+  url      = "file:dev.db"
+}
+
+model AccessToken {
+  id      String   @default(cuid()) @id
+  token   String   @unique
+  client  Client
+  user    User
+  scope   String
+}
+
+model RefreshToken {
+  id      String   @default(cuid()) @id
+  token   String   @unique
+  client  Client
+  user    User
+  scope   String
+}
+
+model Client {
+  id            String   @default(cuid()) @id
+  client_id     String   @unique
+  client_secret String   @unique
+  name          String
+  description   String
+  homepage_url  String?
+  redirect_uri  String
+  user          User
+}
+
+model AuthorizationCode {
+  id      String   @default(cuid()) @id
+  client  Client
+  user    User
+  code    String @unique
+  scope   String
+}
+
+model Scope {
+  id            String   @default(cuid()) @id
+  name          String
+  description   String
+}
+
+model User {
+  id       String  @default(cuid()) @id
+  email    String  @unique
+  username String  @unique
+  password String
+  name     String
+}
```


