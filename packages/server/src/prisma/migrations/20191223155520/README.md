# Migration `20191223155520`

This migration has been generated by Guillermo at 12/23/2019, 3:55:20 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Client" (
  "client_id" TEXT    ,
  "client_secret" TEXT    ,
  "description" TEXT NOT NULL DEFAULT ''  ,
  "homepage_url" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  "redirect_uri" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

INSERT INTO "new_Client" ("client_id","client_secret","description","homepage_url","id","name","redirect_uri") SELECT "client_id","client_secret","description","homepage_url","id","name","redirect_uri" from "Client"

DROP TABLE "quaint"."Client";

ALTER TABLE "quaint"."new_Client" RENAME TO "Client";

CREATE UNIQUE INDEX "quaint"."Client.client_id" ON "Client"("client_id")

CREATE UNIQUE INDEX "quaint"."Client.client_secret" ON "Client"("client_secret")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_User" (
  "email" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "name" TEXT    ,
  "password" TEXT NOT NULL DEFAULT ''  ,
  "username" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

INSERT INTO "new_User" ("email","id","name","password","username") SELECT "email","id","name","password","username" from "User"

DROP TABLE "quaint"."User";

ALTER TABLE "quaint"."new_User" RENAME TO "User";

CREATE UNIQUE INDEX "quaint"."User.email" ON "User"("email")

CREATE UNIQUE INDEX "quaint"."User.username" ON "User"("username")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_AuthorizationCode" (
  "client_id" TEXT    ,
  "client_secret" TEXT    ,
  "code" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "redirect_uri" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

INSERT INTO "new_AuthorizationCode" ("client_id","client_secret","code","id","redirect_uri") SELECT "client_id","client_secret","code","id","redirect_uri" from "AuthorizationCode"

DROP TABLE "quaint"."AuthorizationCode";

ALTER TABLE "quaint"."new_AuthorizationCode" RENAME TO "AuthorizationCode";

CREATE UNIQUE INDEX "quaint"."AuthorizationCode.client_id" ON "AuthorizationCode"("client_id")

CREATE UNIQUE INDEX "quaint"."AuthorizationCode.client_secret" ON "AuthorizationCode"("client_secret")

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;

PRAGMA foreign_keys=OFF;

CREATE TABLE "quaint"."new_Scope" (
  "authorizationCode" TEXT    REFERENCES "AuthorizationCode"(id) ON DELETE SET NULL,
  "description" TEXT NOT NULL DEFAULT ''  ,
  "id" TEXT NOT NULL   ,
  "name" TEXT NOT NULL DEFAULT ''  ,
  PRIMARY KEY ("id")
);

INSERT INTO "new_Scope" ("authorizationCode","description","id","name") SELECT "authorizationCode","description","id","name" from "Scope"

DROP TABLE "quaint"."Scope";

ALTER TABLE "quaint"."new_Scope" RENAME TO "Scope";

PRAGMA "quaint".foreign_key_check;

PRAGMA foreign_keys=ON;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20191223112857..20191223155520
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "sqlite"
-  url = "***"
+  url      = "file:dev.db"
 }
 model Client {
   id            String   @default(cuid()) @id
@@ -14,10 +14,8 @@
   name          String
   description   String
   homepage_url  String
   redirect_uri  String
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
 }
 model AuthorizationCode {
   id            String   @default(cuid()) @id
@@ -25,28 +23,22 @@
   client_secret String?  @unique
   redirect_uri  String
   code          String
   scope         Scope[]
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
 }
 model Scope {
   id            String   @default(cuid()) @id
   name          String
   description   String
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
 }
 model User {
   id       String  @default(cuid()) @id
   email    String  @unique
   username String  @unique
   password String
-  name     String
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  name     String?
 }
 model Post {
   id        String   @default(cuid()) @id
```


